<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/nav_graph"
    app:startDestination="@id/navigation_home">

    <!-- =================================================================== -->
    <!-- Home Flow -->
    <!-- =================================================================== -->
    <fragment
        android:id="@+id/navigation_home"
        android:name="com.example.apptauhoa.ui.home.HomeFragment"
        android:label="fragment_home"
        tools:layout="@layout/fragment_home">
        <action
            android:id="@+id/action_home_to_station_picker"
            app:destination="@id/navigation_station_picker" />
        <action
            android:id="@+id/action_home_to_date_picker"
            app:destination="@id/navigation_date_picker" />
        <action
            android:id="@+id/action_home_to_search_results"
            app:destination="@id/navigation_search_results" />
    </fragment>

    <fragment
        android:id="@+id/navigation_station_picker"
        android:name="com.example.apptauhoa.ui.home.StationPickerFragment"
        android:label="StationPickerFragment"
        tools:layout="@layout/fragment_station_picker">
        <argument android:name="purpose" app:argType="string" />
    </fragment>

    <fragment
        android:id="@+id/navigation_date_picker"
        android:name="com.example.apptauhoa.ui.home.DatePickerFragment"
        android:label="DatePickerFragment"
        tools:layout="@layout/fragment_date_picker" />

    <!-- =================================================================== -->
    <!-- Search > Coach > Seat Selection Flow -->
    <!-- =================================================================== -->
    <fragment
        android:id="@+id/navigation_search_results"
        android:name="com.example.apptauhoa.ui.journey.SearchResultsFragment"
        android:label="fragment_search_results"
        tools:layout="@layout/fragment_search_results">
        <argument android:name="originName" app:argType="string"/>
        <argument android:name="destinationName" app:argType="string"/>
        <argument android:name="departureDate" app:argType="string"/>
        <argument android:name="adults" app:argType="integer"/>
        <argument android:name="children" app:argType="integer"/>
        <argument android:name="infants" app:argType="integer"/>
        <action
            android:id="@+id/action_search_results_to_coach_picker"
            app:destination="@id/coachPickerFragment" />
        <action
            android:id="@+id/action_search_results_to_trip_filter"
            app:destination="@id/tripFilterFragment" />
    </fragment>
    
    <dialog
        android:id="@+id/tripFilterFragment"
        android:name="com.example.apptauhoa.ui.journey.TripFilterFragment"
        android:label="TripFilterFragment"
        tools:layout="@layout/fragment_trip_filter" />

    <fragment
        android:id="@+id/coachPickerFragment"
        android:name="com.example.apptauhoa.ui.journey.CoachPickerFragment"
        android:label="CoachPickerFragment"
        tools:layout="@layout/fragment_coach_picker">
        <argument android:name="tripId" app:argType="string" />
        <argument android:name="trainCode" app:argType="string" />
        <argument android:name="departureTime" app:argType="string" />
        <argument android:name="arrivalTime" app:argType="string" />
        <argument android:name="coachList" app:argType="com.example.apptauhoa.ui.journey.Coach[]" />
        <argument android:name="originStation" app:argType="string" />
        <argument android:name="destinationStation" app:argType="string" />
        <argument android:name="tripDate" app:argType="string" />
        <action
            android:id="@+id/action_coach_picker_to_seat_selection"
            app:destination="@id/navigation_seat_selection" />
    </fragment>

    <fragment
        android:id="@+id/navigation_seat_selection"
        android:name="com.example.apptauhoa.ui.ticket.SeatSelectionFragment"
        android:label="SeatSelectionFragment"
        tools:layout="@layout/fragment_seat_selection">
        <action android:id="@+id/action_seat_selection_to_route_info" app:destination="@id/dialog_route_info"/>
        <action android:id="@+id/action_seat_selection_to_facilities" app:destination="@id/dialog_facilities"/>
        <action android:id="@+id/action_seat_selection_to_gallery" app:destination="@id/dialog_gallery"/>
        <action android:id="@+id/action_seat_selection_to_reviews" app:destination="@id/dialog_reviews"/>
        <action android:id="@+id/action_seat_selection_to_policy" app:destination="@id/dialog_policy"/>
        <action android:id="@+id/action_seat_selection_to_ticket_detail" app:destination="@id/navigation_ticket_detail"/>
        
        <argument android:name="tripId" app:argType="string"/>
        <argument android:name="trainCode" app:argType="string"/>
        <argument android:name="departureTime" app:argType="string"/>
        <argument android:name="arrivalTime" app:argType="string"/>
        <argument android:name="coachClass" app:argType="string"/>
        <argument android:name="price" app:argType="long"/>
        <argument android:name="availableSeats" app:argType="integer"/>
        <argument android:name="originStation" app:argType="string"/>
        <argument android:name="destinationStation" app:argType="string"/>
        <argument android:name="tripDate" app:argType="string"/>
    </fragment>

    <dialog android:id="@+id/dialog_route_info" android:name="com.example.apptauhoa.ui.ticket.info.RouteInfoFragment" />
    <dialog android:id="@+id/dialog_facilities" android:name="com.example.apptauhoa.ui.ticket.info.FacilitiesFragment"/>
    <dialog android:id="@+id/dialog_gallery" android:name="com.example.apptauhoa.ui.ticket.info.GalleryFragment" />
    <dialog android:id="@+id/dialog_reviews" android:name="com.example.apptauhoa.ui.ticket.info.ReviewsFragment" />
    <dialog android:id="@+id/dialog_policy" android:name="com.example.apptauhoa.ui.ticket.info.PolicyFragment" />

    <fragment
        android:id="@+id/navigation_ticket_detail"
        android:name="com.example.apptauhoa.ui.ticket.TicketDetailFragment"
        android:label="fragment_ticket_detail"
        tools:layout="@layout/fragment_ticket_detail">
        <argument android:name="tripId" app:argType="string" app:nullable="true"/>
        <argument android:name="selectionResult" app:argType="com.example.apptauhoa.ui.ticket.SeatSelectionResult" app:nullable="true"/>
    </fragment>

    <!-- =================================================================== -->
    <!-- Other Top-Level Destinations -->
    <!-- =================================================================== -->
    <fragment
        android:id="@+id/navigation_journey"
        android:name="com.example.apptauhoa.ui.journey.JourneyFragment"
        android:label="fragment_journey"
        tools:layout="@layout/fragment_journey" />
    <fragment
        android:id="@+id/navigation_lookup"
        android:name="com.example.apptauhoa.ui.lookup.LookupFragment"
        android:label="fragment_lookup"
        tools:layout="@layout/fragment_lookup" />
    <fragment
        android:id="@+id/navigation_notifications"
        android:name="com.example.apptauhoa.ui.notifications.NotificationsFragment"
        android:label="fragment_notifications"
        tools:layout="@layout/fragment_notifications" />
        
    <fragment
        android:id="@+id/navigation_account"
        android:name="com.example.apptauhoa.ui.account.AccountFragment"
        android:label="fragment_account"
        tools:layout="@layout/fragment_account">
        <action android:id="@+id/action_accountFragment_to_loginFragment" app:destination="@id/loginFragment" />
        <action android:id="@+id/action_accountFragment_to_introFragment" app:destination="@id/introFragment" />
        <action android:id="@+id/action_accountFragment_to_routesFragment" app:destination="@id/routesFragment" />
        <action android:id="@+id/action_accountFragment_to_officeFragment" app:destination="@id/officeFragment" />
        <action android:id="@+id/action_accountFragment_to_settingsFragment" app:destination="@id/settingsFragment" />
    </fragment>
    
    <!-- Fragments for Account actions -->
    <fragment android:id="@+id/introFragment" android:name="com.example.apptauhoa.ui.account.IntroFragment" android:label="Intro" tools:layout="@layout/fragment_intro"/>
    <fragment android:id="@+id/routesFragment" android:name="com.example.apptauhoa.ui.account.RoutesFragment" android:label="Routes" tools:layout="@layout/fragment_routes"/>
    <fragment android:id="@+id/officeFragment" android:name="com.example.apptauhoa.ui.account.OfficeFragment" android:label="Office" tools:layout="@layout/fragment_office"/>
    <fragment android:id="@+id/settingsFragment" android:name="com.example.apptauhoa.ui.account.SettingsFragment" android:label="Settings" tools:layout="@layout/fragment_settings"/>


    <fragment
        android:id="@+id/loginFragment"
        android:name="com.example.apptauhoa.ui.account.LoginFragment"
        android:label="Login">
        <action
            android:id="@+id/action_loginFragment_to_registerFragment"
            app:destination="@id/registerFragment" />
        <action
            android:id="@+id/action_loginFragment_to_homeFragment"
            app:destination="@id/navigation_account"
            app:popUpTo="@id/loginFragment"
            app:popUpToInclusive="true" />
    </fragment>

    <fragment
        android:id="@+id/registerFragment"
        android:name="com.example.apptauhoa.ui.account.RegisterFragment"
        android:label="Register">
        <action
            android:id="@+id/action_registerFragment_to_loginFragment"
            app:destination="@id/loginFragment"
            app:popUpTo="@id/loginFragment"
            app:popUpToInclusive="true" />
    </fragment>

</navigation>
